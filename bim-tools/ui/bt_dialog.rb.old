#       bt_dialog.rb
#       
#       Copyright (C) 2011 Jan Brouwer <jan@brewsky.nl>
#       
#       This program is free software: you can redistribute it and/or modify
#       it under the terms of the GNU General Public License as published by
#       the Free Software Foundation, either version 3 of the License, or
#       (at your option) any later version.
#       
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#       
#       You should have received a copy of the GNU General Public License
#       along with this program.  If not, see <http://www.gnu.org/licenses/>.

class Bt_dialog
	def initialize()#project)
    #@project = project
    #bt_lib = @project.library
		    
		# Create WebDialog instance
		@dialog = UI::WebDialog.new
		@pathname = File.expand_path( File.dirname(__FILE__) )
		mainpath = @pathname.split('ui')[0]
		@imagepath = mainpath + "images" + File::SEPARATOR
		#@bt_lib = bt_lib
		@dialog.set_html( html ) 		
		@dialog.show
	end
	
	def html
		return "
			<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
			<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
				<head>
					<title>bt_window</title>
					<link rel='stylesheet' type='text/css' href='" + @pathname + "/bt_dialog.css' />
					<meta http-equiv='content-type' content='text/html;charset=utf-8' />
				</head>
				<body>
					<div id='1' class='section'>
						<img src='" + @imagepath + "maximize.png' class='minmax'>
						<h1> title </h1>
						<div class='input-block'>
							<h2>Selected entity</h2>
							<form action='skp:update_entity_properties@true'>
								<span class='input'>Width:</span>
								<input type='text' name='width' value='100' />
							<input class='submit' type='submit' name='submit' value='Update' />
							</form>
						</div>
					</div>
				</body>
			</html>
		"
	end
	
	def get_attribute(key)
		model = Sketchup.active_model
		attribute = model.get_attribute "ifc", key
		return attribute.to_s
	end
end
